\chapter{Analisis}
\label{chap:analisi}

%Analisis Aplikasi Sejenis
\section{Analisis Aplikasi Sejenis}
\label{lab:Analisis Aplikasi Sejenis}
% Aplikasi publik transport Android
\hspace{0.5cm} Aplikasi sejenis penulis temui bernama "Public Transport"\footnotemark[1]. Namun aplikasi tersebut hanya dapat dijalankan di sistem aplikasi android. Aplikasi "Public Transport" ini memanfaatkan Kiri API. Penggunaannya cukup sederhana. Di halaman awal pengguna dapat mengetikan lokasi awal dan tujuan. Selain dengan mengetik pengguna juga dapat menunjuk lokasi pada peta. Setelah lokasi dipilih sistem akan memastikan dengan memberi daftar nama jalan dan tempat terkait. Jika sudah memilih maka sistem akan mengeluarkan hasil pencarian rute.
\footnotetext[1]{\url{https://play.google.com/store/apps/details?id=travel.kiri.smarttransportapp}}

Berikut adalah tampilan dari aplikasi "Public Transport" (Gambar ~\ref{fig:home} sampai ~\ref{fig:peta}):

\begin{figure}[h]
	\centering
		\includegraphics[scale=0.5]{Gambar/KIRI_Android/home}
	\caption{Tampilan awal aplikasi Public Transport}
	\label{fig:home}
\end{figure}

\begin{figure}[h]
	\centering
		\includegraphics[scale=0.5]{Gambar/KIRI_Android/menunjuk_lokasi}
	\caption{Menunjuk lokasi pada peta}
	\label{fig:menunjuk}
\end{figure}

\begin{figure}[h]
	\centering
		\includegraphics[scale=0.5]{Gambar/KIRI_Android/terkait}
	\caption{Memberikan daftar nama tempat dan nama jalan terkait}
	\label{fig:terkait}
\end{figure}

\begin{figure}[h]
	\centering
		\includegraphics[scale=0.5]{Gambar/KIRI_Android/tampilan_daftar}
	\caption{Tampilan rute kendaraan umum dalam bentuk daftar}
	\label{fig:daftar}
\end{figure}

\begin{figure}[h]
	\centering
		\includegraphics[scale=0.5]{Gambar/KIRI_Android/tampilan_peta}
	\caption{Tampilan rute kendaraan umum di peta}
	\label{fig:peta}
\end{figure}
% tampilannya, cara kerja, hal yang dapat dilakukan

\clearpage

%Analisis Analisis Program
\section{Analisis Aplikasi}
\label{lab:Analisis Aplikasi}
\hspace{0.5cm} Aplikasi akan dibuat mengguakan bahasa pemograman C\#. Aplikasi yang digunakan untuk membangun Aplikasi Pencari Rute Kendaraan Umum untuk Windows Phone adalah Visual Studio Express 2013. Pada sub bab ini akan dibahas diagram use case dan diagram kelas dari aplikasi yang akan dibangun. 

%Analisis Kebutuhan Aplikasi
\subsection{Kebutuhan Aplikasi}
\label{lab:Kebutuhan Aplikasi}
\hspace{0.5cm} Dari hasil observasi penulis dalam menentukan lokasi asal dan lokasi tujuan ada 2 cara. 2 cara tersebut yaitu dengan menulis alamat atau tempat dan dengan menunjuk pada peta. Cara menuliskan alamat atau tempat yaitu dengan menuliskan alamat atau tempat pada tempat yang disediakan untuk asal dan tujuan. Cara menunjuk pada peta yaitu dengan mengetuk layar di posisi yang diinginkan. Kedua hal tersebut pada dasarnya sama saja tetapi ada faktor kemudahan pengguna dalam pemakaiannya. Jadi penulis menyediakan 2 cara tersebut pada aplikasi yang penulis buat agar pengguna dapat memilih salah satunya.

\hspace{0.5cm} Pada saat menuliskan lokasi atau tempat atau menunjuk langsung pada peta mungkin saja terjadi kesalahan. Kesalahan tersebut bisa saja salah pengetikan atau nama tempat yang tidak ada. Maka dari itu dibutuhkan pemeriksaan terhadap masukan pengguna. Pemeriksaan tersebut dilakukan setelah pengguna memulai pencarian dengan menekan tombol "FIND".

\hspace{0.5cm} Untuk hasil keluaran ada 2 tipe seperti aplikasi peta lainnya. Kedua tipe tersebut adalah bentuk daftar dan bentuk peta. Bentuk daftar memudahkan dalam melihat tiap langkah rute. bentuk daftar memudahkan pengguna dalam melihat arah dan posisi lingkungan pada rute yang dipilih.

\hspace{0.5cm} Aplikasi yang penulis bangun didasarkan pada kebutuhan adalah sebagai berikut:
\begin{enumerate}
	\item Pengguna dapat memasukan lokasi asal dan lokasi tujuan pada bidang yang disediakan atau menunjuk langsung lokasi pada peta.
	\item Mendapatkan lokasi terkait menurut lokasi yang dimasukan pengguna.
	\item Menampilkan hasil rute angkutan umum dari lokasi asal ke lokasi tujuan.
\end{enumerate}

% SUB Analisis Kontrol yang Dipakai
\subsection{Analisis Kontrol yang Dipakai}
\label{lab:Analisis Kontrol yang Dipakai}
\hspace{0.5cm} Dari kebutuhan yang telah disebutkan diatas penulis menyadari pentingnya kontrol yang harus dipakai. Kontrol yang dimaksud termasuk tata letak, teks, pilihan, dan daftar. Kebutuhan akan kontrol penting bukan hanya untuk kebutuhan tapi memudahkan pengguna. 

\hspace{0.5cm} Untuk kontrol tata letak penulis membayangkan pengaturan yang tertata rapih dan beberapa elemen dalam satu baris atau kolom. Tetapi juga penulis tidak mengharapkan penggunaan kontrol tata letak yang rumit. Dari hasil pengamatan penulis kontrol tata letak yang cocok adalah Grid. Kontrol tata letak ini penulis pilih karena mudah diposisiskan sesuai baris dan kolom. Selain itu tampilan Grid akan menyesuaikan jika layar diputar dari posisi pemandangan ke posisi potret dan sebaliknya.

\hspace{0.5cm} Kontrol terhadap teks juga diperlukan untuk aplikasi ini. Kebutuhan yang diperlukan adalah mengeluarkan potongan teks yang dapat dibaca dan tempat pengguna memasukan teks. Untuk mengeluarkan teks yang dapat dilihat penulis akan menggunakan TextBlock. untuk masukan pengguna terhadap aplikasi penulis akan menyediakan TextBox sebagai tempat teks.

\hspace{0.5cm} Suatu aplikasi tentunya tidak hanya mempunyai satu halaman. Sama hal dengan aplikasi yang penulis buat memiliki beberapa halaman yang mempunyai tugas berbeda. Karena hal tersebut dibutuhkan kontrol untuk berpindah dari satu halaman ke halaman lain. Kontrol yang dibutuhkan yaitu kontrol tombol. Kontrol tombol akan mengeksekusi \textit{event click} yang memungkinkan indah halaman dan melakukan perintah.  

\hspace{0.5cm} Untuk menampilkan rute salah satu cara yang penulis lakukan adalah menampilkan dalam bentuk daftar. Bentuk daftar yang dapat dipakai di Windows Phone adalah menggunakan ListBox. ListBox akan menampilkan daftar rute satu per satu menurun ke bawah.

% SUB Analisis Terhadap Siklus Hidup Aplikasi
\subsection{Analisis Terhadap Siklus Hidup Aplikasi}
\label{lab:Analisis Terhadap Siklus Hidup Aplikasi}
\hspace{0.5cm} Aplikasi pada Windows Phone memiliki siklus hidup yang dijelaskan pada bab 2. Pengaturan aplikasi ini diatur sesuai konfigurasi awal sistem operasi Windows Phone. Tetapi pengaturan ini dapat diatur sesuai kebutuhan aplikasi. Karena di aplikasi ini terdapat keadaan yang berbeda dengan konfigurasi awal sistem operasi Windows Phone maka perlu adanya pengaturan ulang.

\hspace{0.5cm} Saat aplikasi dijalankan, pengguna memasukan lokasi asal dan lokasi tujuan dimasukan sampai pencarian rute dilakukan aplikasi akan berada di keadaan "Running". Tetapi ada kemungkinan pengguna berpindah aplikasi atau mematikan layar untuk menghemat daya maka aplikasi akan masuk ke keadaan "Suspended" dan setelah beberapa saat akan masuk ke keadaan "NotRunning". Jika dalam keadaan "Suspended" atau "NotRunnning" maka begitu aplikasi dibuka kembali keadaan aplikasi akan sama seperti keadaan terakhir sebelum keluar. Tetapi pada pemakaian oleh pengguna ada kemungkinan pengguna terlalu banyak mengakses aplikasi lain terlalu banyak dan mematikan layar terlalu lama maka aplikasi akan masuk ke keadaan "Close". Untuk menghindari hal pengguna mematikan layar terlalu lama maka keadaan "Supended" atau "NotRunning" harus diatur agar saat melihat peta dan mematikan layar aplikasi tidak masuk ke keadaan "Close". 

% SUB Analisis Peta
\subsection{Analisis Peta}
\label{lab:Analisis Peta}
\hspace{0.5cm} Untuk tampilan peta ada beberapa aspek yang perlu diperhatikan untuk memudahkan pengguna. Aspek yang perlu diperhatikan adalah tingkat zoom level, pandangan terhadap peta atau kartografi, dan mode warna. Setelah itu karena tampilan rute pada hasil pencarian dapat dimasukan gambar angkutan umum maka diperlukan penggunaan pushpin. Sesuai keluaran Kiri API yang mengeluarkan titik lokasi maka diperlukan teknik penggambaran rute yaitu menggunakan polyline.

\hspace{0.5cm} Tampilan awal peta di Windows Phone akan mengeluarkan peta dengan pandangan dunia. Karena aplikasi pencarian rute ini masih terbatas di Pulau Jawa, Indonesia terutama Jawa Barat maka zoom level harus diatur agar mengikuti lokasi pengguna dan di satu daerah saja. Jika pengguna berada di daerah Bandung maka zoom level pada peta disesuaikan pada daerah tersebut.

\hspace{0.5cm} Untuk cara pandang peta terdapat 4 pandangan yang disediakan Peta Windows Phone yaitu Road, Aerial, Hybrid, dan Terrain. Aplikasi ini adalah aplikasi pencari rute dan pandangan lebih banyak diarahkan ke jalan. Kebutuhan pengguna adalah nama jalan, kondisi jalan, dan kondisi sekitar. Untuk dasar pandangan tersebut pandangan yang penulis pilih untuk aplikasi ini adalah Road. Tambahan setelah mengatur pandangan peta yaitu mengatur warna dan penulis akan menggunakan mode warna terang sesuai bawaan.

%Kasih gambar road

\hspace{0.5cm} Untuk di setiap kota ada satu angkutan umum yang banyak dipakai yaitu angkutan kota(angkot). Namun bagi yang baru pertama mengunjungi suatu daerah dan mencari angkot mungkin akan kesulitan membaca trayek dari angkot tersebut. Namun ada satu cara yang mudah untuk membedakan angkot di setiap rute yaitu dari warna dan coraknya. Agar dapat memudahkan pengguna dan menghindari pengguna saat naik angkot maka Kiri API sudah menyediakan gambar angkot yang seusai dengan setiap rute. Gambar angkot tersebut akan ditepatkan di peta dengan suatu penampung beserta keterangan. Salah satu teknik untuk menempatkan gambar tersebut adalah dengan membuat lapisan terpisah di atas peta tempat gambar tersebut. Untuk hal tersebut penulis akan memanfaatkan Pushpin sebagai lapisan terpisah untuk menaruh gambar dan keterangan angkutan umum.

\hspace{0.5cm} Pencarian rute yang penulis gunakan untuk aplikasi yaitu dengan memakai Kiri API. Kiri API akan memberikan kembalian berupa titik-titik rute. Karena hal itu penulis harus menggambar rute tersebut sesuai jalan pada peta. Untuk hal tersebut penulis akan menggunakan Kelas Polyline pada Windows Phone untuk menggambarnya. Polyline yang digambar harus terlihat dengan jelas dan diberi warna yang kontras dengan warna peta.

% SUB Kiri API
\subsection{Kiri API}
\label{lab:Kiri API}
\hspace{0.5cm} Kiri API menyediakan 2 parameter untuk permintaan yaitu POST dan GET. Parameter GET berarti data dikirim melalui \textit{Uniform resource locator} atau disingkat URL. Sedangkan permintaan POST akan menyertakan data pada baris permintaan. Selanjutnya permintaan tersebut akan dikirim ke URL. Untuk hal ini penulis akan mengirim ke URL \url{ http://kiri.travel/handle.php}.

\hspace{0.5cm} Untuk setiap permintaan terhadap Kiri API dibutuhkan \textit{API key}. Kegunaan \textit{API key} adalah password untuk mengakses Kiri API. \textit{API key} dapat didapatkan di \url{dev.kiri.travel}. Berikut langkah-langkah dari membuka \url{dev.kiri.travel} sampai penulis mendapatkan \textit{API key}.
\begin{itemize}
	\item Masuk ke situs \url{dev.kiri.travel}.
	\item Register dengan memasukan alamat email, nama, dan nama perusahaan.
	\item Password akan dikirimkan ke alamat email. Tentunya password akan dibuat otomatis oleh pihak Kiri.
	\item Login setelah mengetahui password yang diterima dari alamat email. 
	\item Setelah berhasil login, di menu utama terdapat API Keys Managements yang dapat dipilih.
	\item Pilih tombol Add lalu masukan deskripsi penggunaan \textit{API key} yaitu untuk Skripsi.
	\item \textit{API key} didapat dan dapat digunakan.
\end{itemize}
     
\hspace{0.5cm} Untuk tugas akhir ini penulis akan menggunakan 2 layanan yang ada pada Kiri API. Layanan yang digunakan adalah pencarian lokasi dan routing. Pencarian lokasi adalah layanan untuk menemukan tempat atau nama jalan yang terkait dengan masukan pengguna. Routing adalah layanan untuk menemukan langkah yang harus ditempuh pengguna untuk sampai ke lokasi tujuan dari lokasi asal. 

\hspace{0.5cm} Pemanfaatan layanan pencarian lokasi yaitu dengan parameter GET melalui protokol HTTP. Berikut parameter yang harus dikirimkan:
\begin{itemize}
	\item version: 2
	\item mode: "searchplace"
	\item region: "cgk" untuk Jakarta, "bdo" untuk Bandung, dan "sub" untuk Surabaya
	\item querystring: merupakan kata kunci lokasi yang pengguna tuju
	\item apikey: 16 digit hexadesimal
\end{itemize}
Format layanan yang dikirim melalui URL adalah \url{kiri.travel/handle.php?version=2&mode=searchplace&region=cgk/bdo/sub&querystring="string"&apikey=97A7A1157A05ED6F}.
\newline
\\Penulis mencoba mencari lokasi bip dari kata kunci "bip" yang berada di bandung. Layanan dikirimkan ke URL \url{kiri.travel/handle.php}. 
Berikut format layanan yang penulis kirim:\newline
{\url{http://kiri.travel/handle.php?version=2&mode=searchplace&region=bdo&querystring=bip&apikey=97A7A1157A05ED6F}}
\newline
\\Berikut hasil kembalian dari Kiri API: 

\begin{lstlisting} [caption= code \textit{respond} pencarian rute]
{ 
	"status":"ok",
	"searchresult":[
		{
			"placename":"Hypermart - BIP Plaza",
			"location":"-6.90864,107.61108"
		},
		{
			"placename":"Stroberi - BIP",
			"location":"-6.90834,107.61115"
		},
		{
			"placename":"Kebab Kings (Hypermart BIP)",
			"location":"-6.91503,107.61017"
		},
		{
			"placename":"Pegadaian UPC Bip Mall",
			"location":"-6.90916,107.61052"
		},
		{
			"placename":"Rice Bowl BIP",
			"location":"-6.90873,107.61088"
		},
		{	
			"placename":"Gee Eight - Bip",
			"location":"-6.90817,107.61080"
		},
		{
			"placename":"Jonas Photo - BIP",
			"location":"-6.91066,107.61016"
		},
		{
			"placename":"Bip Foodcourt",
			"location":"-6.91081,107.61015"
		},
		{
			"placename":"Mister Baso BIP",
			"location":"-6.90348,107.61709"
		},
		{
			"placename":"JH Moriska - Bip",
			"location":"-6.90868,107.61070"}
	],
	"attributions":null
}
\end{lstlisting}

\hspace{0.5cm} Pemanfaatan layanan routing untuk mendapatkan langkah yang haris ditempuh pengguna untuk mencapai lokasi tujuan dari lokasi asal. Pemanfaatan layanan ini yaitu dengan parameter GET melalui protokol HTTP. Berikut parameter yang harus dikirim:
\begin{itemize}
	\item version: 2
	\item mode: "findroute"
	\item locale: "en" untuk bahasa Inggris dan "id" untuk bahasa Indonesia.
	\item start: koordinat lokasi awal dalam berupa latitude dan longitude.
	\item finish: koordinat lokasi tujuan dalam berupa latitude dan longitude.
	\item presentation: "mobile" untuk perangkat bergerak dan "desktop" untuk komputer.
	\item apikey: 16 digit hexadesimal
\end{itemize}

Format layanan yang dikirim melalui URL adalah \url{kiri.travel/handle.php?version=2&mode=findroute&locale=en/id&start=lat,lng&finish=lat,lng&presentation=mobile/desktop&apikey=97A7A1157A05ED6}

% untuk routing dari jalan ciumbuleuit ke jalan merdeka
%http://kiri.travel/handle.php?version=2&mode=findroute&locale=en&start=-6.8747337,107.6048829&finish=-6.9114646,107.6104887&presentation=mobile&apikey=97A7A1157A05ED6F

%kembalian
%{"status":"ok","routingresults":[{"steps":[["walk","walk",["-6.8747337,107.6048829","-6.87445,107.60465"],"Walk about 41 meter from your starting point %fromicon to Jalan Ciumbuleuit %toicon.",null],["angkot","ciumbuleuitsthalllurus",["-6.87445,107.60465","-6.87541,107.60443","-6.87637,107.60421","-6.87734,107.60400","-6.87830,107.60378","-6.87926,107.60356","-6.87926,107.60356","-6.87963,107.60352","-6.87978,107.60352","-6.88093,107.60392","-6.88209,107.60433","-6.88209,107.60433","-6.88328,107.60490","-6.88328,107.60490","-6.88347,107.60481","-6.88452,107.60459","-6.88556,107.60436","-6.88660,107.60413","-6.88764,107.60390","-6.88764,107.60391","-6.88782,107.60392","-6.88887,107.60404","-6.88991,107.60416","-6.88991,107.60416","-6.89161,107.60428","-6.89161,107.60428","-6.89166,107.60421","-6.89275,107.60424","-6.89275,107.60424","-6.89405,107.60408","-6.89405,107.60408","-6.89496,107.60400"],"Take angkot Ciumbuleuit - St. Hall (lurus) at Jalan Ciumbuleuit %fromicon, and alight at Jalan Cihampelas %toicon about 2.3 kilometer later.",null],["angkot","kalapaledeng",["-6.89501,107.60403","-6.89562,107.60398","-6.89623,107.60395","-6.89732,107.60401","-6.89732,107.60401","-6.89882,107.60414","-6.89882,107.60414","-6.89969,107.60418","-6.90071,107.60426","-6.90173,107.60433","-6.90173,107.60433","-6.90297,107.60437","-6.90420,107.60440","-6.90420,107.60440","-6.90426,107.60456","-6.90422,107.60481","-6.90399,107.60546","-6.90406,107.60617","-6.90454,107.60697","-6.90454,107.60697","-6.90512,107.60745","-6.90618,107.60778","-6.90618,107.60778","-6.90643,107.60787","-6.90651,107.60807","-6.90675,107.60914","-6.90675,107.60914","-6.90694,107.60939","-6.90723,107.60939","-6.90891,107.60943","-6.90891,107.60943","-6.90909,107.60934","-6.90914,107.60857","-6.90933,107.60846","-6.91021,107.60887","-6.91021,107.60887","-6.91030,107.60897","-6.91028,107.60927","-6.90986,107.61040","-6.90986,107.61040"],"Take angkot Kalapa - Ledeng at Jalan Cihampelas %fromicon, and alight at Jalan Aceh %toicon about 2.3 kilometer later.",null],["walk","walk",["-6.90986,107.61040","-6.9114646,107.6104887"],"Walk about 178 meter from Jalan Aceh %fromicon to your destination %toicon.",null]],"traveltime":"30 minutes"}]}

%Analisis Diagram Use-Case dan Scenario
\subsection{Diagram Use-Case dan Scenario}
\label{lab:Diagram Use-Case dan Scenario}
\hspace{0.5cm} Diagram use-case adalah diagram yang menjelaskan interaksi sistem dengan lingkungan (contoh: pengguna). Berdasarkan analisa di atas maka pengguna dapat:
\begin{itemize}
	\item Mendapatkan lokasi pengguna berada.
	\item Memasukan lokasi asal.
	\item Memasukan lokasi lokasi tujuan.
	\item Menunjuk langsung lokasi asal dan tujuan pada peta.
	\item Memilih alamat atau tempat dari pilihan yang disediakan.
	\item Melihat rute kendaraan umum dalam bentuk titik dan \textit{pushpin} pada peta atau bentuk daftar dari tempat asal ke tempat tujuan.
\end{itemize}

Berikut adalah diaram use case saat pengguna mencari rute kendaraan umum (Gambar:~\ref{fig:UseCase}):
% Use case
\begin{figure}[h]
	\centering
		\includegraphics[scale=0.5]{Gambar/useCase_dan_Class/UseCase}
	\caption{Diagram Use Case}
	\label{fig:UseCase}
\end{figure}

% Skenario Melakukan pencarian rute 
\textbf{Skenario melakukan pencarian rute kendaraan umum}
Nama: Mencari rute kendaraan umum
Aktor: Pengguna
Kondisi Awal: Perangkat lunak dijalankan dan pengguna tidak tahu harus memakai kendaraan umum apa
Deskripsi: Pengguna memasukan lokasi awal dan lokasi tujuan
Kondisi akhir: Aplikasi memberitahukan kendaraan umum yang harus dinaiki pengguna.
Skenario:
\begin{enumerate}
	\item Pengguna memasukan lokasi awal dan tujuan atau menuntuk langsung pada peta.
	\item Sistem memberikan daftar tempat atau jalan terkait.
	\item Pengguna memilih dari daftar tempat atau jalan terkait.
	\item Sistem menentukan rute terbaik.
	\item Sistem menampilkan rute dalam 2 bentuk yaitu daftar dan titik pada peta.
\end{enumerate}
Eksepsi:
\begin{enumerate}
	\item Pengguna memasukan lokasi yang tidak terdaftar di sistem.
	\item Sistem memberi notifikasi bahwa lokasi tidak ditemukan.
\end{enumerate}

%Analisis Class Diagram
\subsection{Class Diagram}
\label{lab:Class Diagram}